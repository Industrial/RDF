// Generated by LiveScript 1.3.1
var levelgraphArrayToNtriplesStream, log, debug;
levelgraphArrayToNtriplesStream = require("../../../../../../../../lib/format/conversion/levelgraph-array-to-ntriples-stream");
log = require("id-debug");
debug = log.debug;
module.exports = function(req, res, next){
  var ref$, s, p, o, options, this$ = this;
  ref$ = req.query, s = ref$.s, p = ref$.p, o = ref$.o;
  options = {};
  if (s && s !== "_") {
    options.subject = s;
  }
  if (p && p !== "_") {
    options.predicate = p;
  }
  if (o && o !== "_") {
    options.object = o;
  }
  return this.dnodeRemote.get(options, function(e, triples){
    var ntriplesStream;
    if (e) {
      return next(e);
    }
    ntriplesStream = levelgraphArrayToNtriplesStream(triples);
    res.status(200);
    ntriplesStream.pipe(res.serializer).pipe(res);
  });
};